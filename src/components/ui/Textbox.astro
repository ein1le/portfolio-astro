---
// Generic multiline textbox component

interface Props {
  placeholder?: string;
  rows?: number;
  name?: string;
  id?: string;
}

const {
  placeholder = '',
  rows = 3,
  name,
  id,
} = Astro.props;

const autoResize = (event: Event) => {
  const target = event.currentTarget as HTMLTextAreaElement | null;
  if (!target) return;
  target.style.height = 'auto';
  target.style.height = `${target.scrollHeight}px`;
};
---

<textarea
  rows={rows}
  name={name}
  id={id}
  placeholder={placeholder}
  class="mt-1 w-full rounded-md border border-[color:var(--border-subtle)] bg-slate-950/40 px-2 py-1.5 text-[0.8rem] text-[color:var(--text-main)] outline-none placeholder:text-[color:var(--text-muted)] focus:border-[color:var(--accent)] focus:ring-1 focus:ring-[color:var(--accent)] overflow-hidden"
  onInput={autoResize}
/>
