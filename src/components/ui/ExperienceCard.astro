---
// Generic Experience card
// Inherits from Card and is used by more specific experience cards.

import Card from './Card.astro';

interface Props {
  title: string;
  role: string;
  location: string;
  dates: string;
  description: string;
  logo?: string;
  skills?: string[];
  subroles?: string[];
  contributors?: string[];
}

const {
  title,
  role,
  location,
  dates,
  description,
  logo,
  skills = [],
  subroles = [],
  contributors = [],
} = Astro.props as Props;
---

<Card>
  <div class="flex flex-col gap-2 text-sm text-[color:var(--text-main)]">
    <div class="flex flex-wrap items-start gap-3">
      {logo ? (
        <div class="h-12 w-12 shrink-0 overflow-hidden rounded-md border border-purple-400/40 bg-slate-900">
          <img
            src={logo}
            alt={`${title} logo`}
            loading="lazy"
            class="h-full w-full object-cover"
          />
        </div>
      ) : title === 'YSG Group Co.' ? (
        <div class="h-12 w-12 shrink-0 rounded-md border border-purple-400/40 bg-white flex items-center justify-center">
          <span class="text-[0.8rem] font-semibold tracking-[0.16em] text-slate-900">
            YSG
          </span>
        </div>
      ) : null}

      <div class="flex min-w-0 flex-1 flex-col gap-1">
        <div class="flex flex-wrap items-start justify-between gap-2">
          <div class="min-w-0 max-w-[65%]">
            <p class="text-[1rem] font-semibold tracking-[0.12em] uppercase break-words">
              {role}
            </p>
            <h2 class="text-[0.9rem] tracking-[0.12em] uppercase break-words text-[color:var(--text-muted)]">
              {title}
            </h2>
          </div>
          <div class="flex flex-col items-end gap-1 text-right">
            <p class="text-[0.78rem] text-[color:var(--text-muted)]">
              {dates}
            </p>
            <p class="text-[0.78rem] text-[color:var(--text-muted)]">
              {location}
            </p>
            <slot name="badge" />
          </div>
        </div>

        {subroles.length > 0 && (
          <ul class="mt-1 list-disc pl-4 text-[0.75rem] text-[color:var(--text-muted)]">
            {subroles.map((item) => (
              <li>{item}</li>
            ))}
          </ul>
        )}
      </div>
    </div>

    {description && (
      <p class="mt-1 text-[0.8rem] leading-relaxed text-[color:var(--text-muted)]">
        {description}
      </p>
    )}

    {skills.length > 0 && (
      <div class="mt-2 flex flex-wrap gap-2 pt-1 text-[0.75rem] text-[color:var(--text-muted)]">
        {skills.map((skill) => (
          <span class="inline-flex items-center rounded-full border border-slate-500/40 bg-slate-950/40 px-2 py-0.5">
            {skill}
          </span>
        ))}
      </div>
    )}

    {contributors.length > 0 && (
      <div class="mt-2 flex flex-wrap gap-2 pt-1 text-[0.75rem] text-[color:var(--text-muted)]">
        {contributors.map((person) => (
          <span class="inline-flex items-center rounded-full border border-slate-500/40 bg-slate-950/40 px-2 py-0.5">
            {person}
          </span>
        ))}
      </div>
    )}
  </div>
</Card>
